<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Homed Rekabdar - Resume</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="page">
    <h1 id="name"></h1>
    <div id="contact"></div>

    <h2>Professional Summary</h2>
    <p id="summary"></p>

    <h2>Skills</h2>
    <ul id="skills"></ul>

    <h2>Experience</h2>
    <div id="experience"></div>

    <h2>Education</h2>
    <div id="education"></div>

    <h2>Performance Reviews</h2>
    <div class="reviews-layout">
      <div id="reviewContainer" class="review-list"></div>
      <div id="reviewDetail" class="review-detail">
        <p>Select a review on the left to read its details.</p>
      </div>
    </div>
  </div>

  <script>
    fetch('Resume.xml')
      .then(response => {
        if (!response.ok) throw new Error("Failed to load Resume.xml");
        return response.text();
      })
      .then(str => (new DOMParser()).parseFromString(str, "text/xml"))
      .then(data => {
        // ===== Basic Info =====
        document.getElementById("name").textContent = data.querySelector("name").textContent.trim();

        const contact = data.querySelector("contact");
        document.getElementById("contact").innerHTML = `
          Email: <a href="mailto:${contact.querySelector("email").textContent.trim()}">${contact.querySelector("email").textContent.trim()}</a> |
          Phone: ${contact.querySelector("phone").textContent.trim()} <br>
          GitHub: <a href="${contact.querySelector("github").textContent.trim()}" target="_blank">${contact.querySelector("github").textContent.trim()}</a> |
          LinkedIn: <a href="${contact.querySelector("linkedin").textContent.trim()}" target="_blank">${contact.querySelector("linkedin").textContent.trim()}</a>
        `;

        // ===== Summary =====
        // Use innerHTML to preserve <br> if any in XML
        document.getElementById("summary").innerHTML = data.querySelector("summary").innerHTML.trim();

        // ===== Skills =====
        const skills = data.querySelectorAll("skill");
        document.getElementById("skills").innerHTML =
          Array.from(skills).map(s => `<li>${s.innerHTML.trim()}</li>`).join("");

        // ===== Experience =====
        const jobs = data.querySelectorAll("job");
        let expHTML = "";
        jobs.forEach(job => {
          expHTML += `
            <h3>${job.querySelector("title").textContent.trim()}</h3>
            <p><em>${job.querySelector("company").textContent.trim()} - ${job.querySelector("location").textContent.trim()} | ${job.querySelector("date").textContent.trim()}</em></p>
            <ul>
              ${Array.from(job.querySelectorAll("duties > duty")).map(d => `<li>${d.innerHTML.trim()}</li>`).join("")}
            </ul>
          `;
        });
        document.getElementById("experience").innerHTML = expHTML;

        // ===== Education =====
        const edu = data.querySelector("education");
        document.getElementById("education").innerHTML = `
          <p><strong>${edu.querySelector("degree").textContent.trim()}</strong><br>${edu.querySelector("year").textContent.trim()}</p>
        `;

        // ===== Performance Reviews =====
        const reviewContainer = document.getElementById("reviewContainer");
        const reviewDetail = document.getElementById("reviewDetail");
        const reviewNodes = data.querySelectorAll("reviews > review");

        reviewNodes.forEach(r => {
          const [title, ...bodyParts] = r.innerHTML.split(":"); // innerHTML preserves <br>
          const body = bodyParts.join(":").trim();

          const card = document.createElement("div");
          card.className = "review-card";
          card.innerHTML = `<strong>${title.trim()}</strong>`;

          card.addEventListener("click", () => {
            document.querySelectorAll(".review-card").forEach(c => c.classList.remove("active"));
            card.classList.add("active");

            reviewDetail.classList.add("show");
            reviewDetail.innerHTML = `
              <h3>${title.trim()}</h3>
              <p>${body}</p>
            `;
          });

          reviewContainer.appendChild(card);
        });
      })
      .catch(err => {
        console.error("Error loading or parsing Resume.xml:", err);
        document.querySelector(".page").innerHTML = "<p style='color:red;'>Failed to load resume. Please check the XML file.</p>";
      });
  </script>
</body>
</html>

